import{e as B,f as L,o as I,g as K,h as q,t as l,j as N,i as s,c as i,F as k,A as F,b as u,s as m,k as A,d as n,n as Q}from"./index-DEGSL-2v.js";import{a as T,b as W,c as X}from"./fetching-DWZPZ03v.js";import{u as Y}from"./ManageUrl-DQr7D2w5.js";import{s as ee}from"./startAuthentication-mwDUkj2u.js";import"./toAuthenticatorAttachment-BAxCDoik.js";const te="_cards_section_1hc4v_1",re="_cards_1hc4v_1",ae="_albumCard_1hc4v_26",oe="_card_1hc4v_1",se="_cardFooter_1hc4v_87",ce="_media_section_1hc4v_107",o={cards_section:te,cards:re,albumCard:ae,card:oe,cardFooter:se,media_section:ce},D="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20fill='none'%20viewBox='300%20300%20600%20600'%3e%3crect%20width='900'%20height='900'%20fill='%23797979'%20rx='3'%20/%3e%3cg%20opacity='.5'%3e%3cg%20opacity='.5'%3e%3cpath%20fill='%23000'%20d='M600.709%20736.5c-75.454%200-136.621-61.167-136.621-136.62%200-75.454%2061.167-136.621%20136.621-136.621%2075.453%200%20136.62%2061.167%20136.62%20136.621%200%2075.453-61.167%20136.62-136.62%20136.62Z'%20/%3e%3cpath%20stroke='%230F0F0F'%20stroke-width='2.418'%20d='M600.709%20736.5c-75.454%200-136.621-61.167-136.621-136.62%200-75.454%2061.167-136.621%20136.621-136.621%2075.453%200%20136.62%2061.167%20136.62%20136.621%200%2075.453-61.167%20136.62-136.62%20136.62Z'%20/%3e%3c/g%3e%3cpath%20stroke='url(%23a)'%20stroke-width='2.418'%20d='M0-1.209h553.581'%20transform='scale(1%20-1)%20rotate(45%201163.11%2091.165)'%20/%3e%3cpath%20stroke='url(%23b)'%20stroke-width='2.418'%20d='M404.846%20598.671h391.726'%20/%3e%3cpath%20stroke='url(%23c)'%20stroke-width='2.418'%20d='M599.5%20795.742V404.017'%20/%3e%3cpath%20fill='%23fff'%20d='M600.709%20656.704c-31.384%200-56.825-25.441-56.825-56.824%200-31.384%2025.441-56.825%2056.825-56.825%2031.383%200%2056.824%2025.441%2056.824%2056.825%200%2031.383-25.441%2056.824-56.824%2056.824Z'%20/%3e%3cg%20clip-path='url(%23e)'%3e%3cpath%20fill='%23777'%20fill-rule='evenodd'%20d='M616.426%20586.58h-31.434v16.176l3.553-3.554.531-.531h9.068l.074-.074%208.463-8.463h2.565l7.18%207.181V586.58Zm-15.715%2014.654%203.698%203.699%201.283%201.282-2.565%202.565-1.282-1.283-5.2-5.199h-6.066l-5.514%205.514-.073.073v2.876a2.418%202.418%200%200%200%202.418%202.418h26.598a2.418%202.418%200%200%200%202.418-2.418v-8.317l-8.463-8.463-7.181%207.181-.071.072Zm-19.347%205.442v4.085a6.045%206.045%200%200%200%206.046%206.045h26.598a6.044%206.044%200%200%200%206.045-6.045v-7.108l1.356-1.355-1.282-1.283-.074-.073v-17.989h-38.689v23.43l-.146.146.146.147Z'%20clip-rule='evenodd'%20/%3e%3c/g%3e%3cpath%20stroke='%230F0F0F'%20stroke-width='2.418'%20d='M600.709%20656.704c-31.384%200-56.825-25.441-56.825-56.824%200-31.384%2025.441-56.825%2056.825-56.825%2031.383%200%2056.824%2025.441%2056.824%2056.825%200%2031.383-25.441%2056.824-56.824%2056.824Z'%20/%3e%3c/g%3e%3cdefs%3e%3clinearGradient%20id='a'%20x1='554.061'%20x2='-.48'%20y1='.083'%20y2='.087'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%230F0F0F'%20stop-opacity='0'%20/%3e%3cstop%20offset='.208'%20stop-color='%230F0F0F'%20/%3e%3cstop%20offset='.792'%20stop-color='%230F0F0F'%20/%3e%3cstop%20offset='1'%20stop-color='%230F0F0F'%20stop-opacity='0'%20/%3e%3c/linearGradient%3e%3clinearGradient%20id='b'%20x1='796.912'%20x2='404.507'%20y1='599.963'%20y2='599.965'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%230F0F0F'%20stop-opacity='0'%20/%3e%3cstop%20offset='.208'%20stop-color='%230F0F0F'%20/%3e%3cstop%20offset='.792'%20stop-color='%230F0F0F'%20/%3e%3cstop%20offset='1'%20stop-color='%230F0F0F'%20stop-opacity='0'%20/%3e%3c/linearGradient%3e%3clinearGradient%20id='c'%20x1='600.792'%20x2='600.794'%20y1='403.677'%20y2='796.082'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%230F0F0F'%20stop-opacity='0'%20/%3e%3cstop%20offset='.208'%20stop-color='%230F0F0F'%20/%3e%3cstop%20offset='.792'%20stop-color='%230F0F0F'%20/%3e%3cstop%20offset='1'%20stop-color='%230F0F0F'%20stop-opacity='0'%20/%3e%3c/linearGradient%3e%3clinearGradient%20id='d'%20x1='404.85'%20x2='796.972'%20y1='403.903'%20y2='796.02'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%230F0F0F'%20stop-opacity='0'%20/%3e%3cstop%20offset='.208'%20stop-color='%230F0F0F'%20/%3e%3cstop%20offset='.792'%20stop-color='%230F0F0F'%20/%3e%3cstop%20offset='1'%20stop-color='%230F0F0F'%20stop-opacity='0'%20/%3e%3c/linearGradient%3e%3cclipPath%20id='e'%3e%3cpath%20fill='%23fff'%20d='M581.364%20580.535h38.689v38.689h-38.689z'%20/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",ie=async b=>{try{const h=await T(`/api/v1/auth/init-auth?email=${b.userEmail}`);if(!h)return!1;let g;try{g=await ee({optionsJSON:h})}catch{return!1}return!!g}catch(h){return console.error("Authentication failed",h),alert("Authentication failed. Please try again."),!1}};var ne=l("<h3>Utilities"),R=l("<div>"),le=l("<main class=mainHomePage><header><div><h1>Collection</h1> </div></header><h3>My Albums<button>Edit</button></h3><div><div></div></div><h3>Places<button>Edit</button></h3><div><div></div></div><div>"),$=l('<img loading=lazy alt="Focus Playlist">',!0,!1),de=l("<div>Create Album"),ue=l("<p>"),he=l("<div><div>Places, Visited"),pe=l("<div><div></div><p>"),V=l("<button><span></span><span>");const me=()=>{const{resetParams:b,updatePage:h}=Y(),[g]=B(W),[p,y]=L({albums:[],locations:[],statusBtn:!1});B(async()=>{try{const r=await X();return r?(y(r),r):[]}catch(r){console.error("Error fetching server capacity:",r)}});const M={Favorite:{favorite:1},Hidden:{hidden:1},Duplicate:{duplicate:1},"Recently Deleted":{deleted:1}};I(()=>b());const j=K(),{loggedUser:H}=q(),z=async r=>{const _=M[r];if(!_)return console.warn(`No update action found for: ${r}`);const f=Object.keys(M[r])[0],w=`/collection/${f}`;if((f==="hidden"||f==="deleted")&&!await ie(H))return console.warn("Authentication failed");h(_),j(w)};return(()=>{var r=le(),_=r.firstChild,f=_.nextSibling,w=f.firstChild,x=w.nextSibling,C=f.nextSibling,P=C.firstChild,U=C.nextSibling,J=U.firstChild,O=J.nextSibling,S=U.nextSibling,G=S.firstChild,E=S.nextSibling;return _.style.setProperty("position","relative"),N(x,"click",()=>console.log("Album clicked")),s(P,i(A,{get when(){return p.albums.length>0},get fallback(){return i(F,{href:"#",get class(){return o.albumCard},get children(){return[(()=>{var e=$();return m(e,"src",D),e})(),de()]}})},get children(){return i(k,{get each(){return p.albums},children:(e,d)=>i(F,{get href(){return`/collection/album/${e.album_id}`},get class(){return o.albumCard},get children(){return[(()=>{var t=$();return u(()=>m(t,"src",e.thumb_path)),t})(),(()=>{var t=R();return s(t,()=>e.title),t})(),(()=>{var t=ue();return s(t,()=>e.media_count),t})()]}})})}})),N(O,"click",()=>console.log("Dataset clicked")),s(G,i(A,{get when(){return p.locations.length>0},get fallback(){return i(F,{href:"#",get class(){return o.card},get children(){return[(()=>{var e=$();return m(e,"src",D),e})(),(()=>{var e=he();return u(()=>n(e,o.cardFooter)),e})()]}})},get children(){return i(k,{get each(){return p.locations},children:(e,d)=>i(F,{get href(){return`/collection/places/${e.location_id}`},get class(){return o.card},get children(){return[(()=>{var t=$();return u(()=>m(t,"src",e.thumb_path)),t})(),(()=>{var t=pe(),a=t.firstChild,c=a.nextSibling;return s(a,()=>`${e.city}, ${e.country}`),s(c,()=>e.media_count),u(()=>n(t,o.cardFooter)),t})()]}})})}})),s(r,i(A,{get when(){return g()},get children(){return[ne(),(()=>{var e=R();return s(e,i(k,{get each(){return Object.entries(g())},children:([d,t])=>parseInt(t)===0?(()=>{var a=V(),c=a.firstChild,v=c.nextSibling;return s(c,d),s(v,t),a})():(()=>{var a=V(),c=a.firstChild,v=c.nextSibling;return a.$$click=async()=>{y("statusBtn",!0),await z(d),y("statusBtn",!1)},s(c,d),s(v,t),u(()=>a.disabled=p.statusBtn),a})()})),u(()=>n(e,o.media_section)),e})()]}}),E),E.style.setProperty("height","100px"),u(e=>{var d=o.atag_group_views,t=o.cards_section,a=o.cards,c=o.atag_group_views,v=o.cards_section,Z=o.cards;return d!==e.e&&n(x,e.e=d),t!==e.t&&n(C,e.t=t),a!==e.a&&n(P,e.a=a),c!==e.o&&n(O,e.o=c),v!==e.i&&n(S,e.i=v),Z!==e.n&&n(G,e.n=Z),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),r})()};Q(["click"]);export{me as default};
